<!doctype html>
<html>
  <head>
      <script src="https://cdn.jsdelivr.net/pyodide/v0.26.1/full/pyodide.js"></script>
  </head>
  <body>
	  <p><code>healpy</code> version: <code id="healpyversion"></code></p>

    <script type="text/javascript">
      async function main(){
        let pyodide = await loadPyodide();

	await pyodide.loadPackage("micropip");
	await pyodide.loadPackage("ssl");
	const micropip = pyodide.pyimport("micropip");
	await micropip.install('dist/healpy-0.1.0-py3-none-any.whl');
	await micropip.install('matplotlib');
  const version = document.getElementById("healpyversion");
  version.textContent = pyodide.runPython("import healpy as hp; hp.__version__");

	pyodide.runPython(`
import matplotlib
matplotlib.use("module://matplotlib_pyodide.wasm_backend")
import healpy as hp
import numpy as np

import matplotlib.pyplot as plt

# m = hp.read_map(
#     "https://healpy.github.io/pyhealpy/test/data/wmap_band_iqumap_r9_7yr_W_v4_udgraded32_masked_smoothed10deg_fortran.fits"
# )
m = np.arange(12)
hp.projview(m, coord=["G"], projection_type="mollweide")
plt.show()
	`);
      }
      main();
    </script>
  </body>
</html>
